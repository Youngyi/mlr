<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling • mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>
      <div class="hidden name"><code>resample.Rmd</code></div>

    </div>

    
    
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level1">
<h1 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h1>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level1">
<h1 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h1>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    23.4450417</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    34.1167208</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    19.1150931</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=25.5589519</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=25.5589519</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0374172</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      25.55895</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 23.44504</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 34.11672</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 19.11509</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.3095238   0.3809524   0.2380952   0.0240000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.3571429   0.4090909   0.3000000   0.0140000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.2380952   0.3500000   0.1363636   0.0150000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.2619048   0.2380952   0.2857143   0.0150000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.3095238   0.3000000   0.3181818   0.0170000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2952381,fpr.test.mean=0.3356277,fnr.test.mean=0.2556710,timetrain.test.mean=0.0170000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.2952381,fpr.test.mean=0.3356277,fnr.test.mean=0.2556710,timetrain.test.mean=0.0170000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.142385</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2952381,fpr.test.mean=0.3356277,fnr.test.mean=0.2556710,timetrain.test.mean=0.0170000,ber.test.mean=0.2956494,timepredict.test.mean=0.0048000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.142385</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.2428571,fpr.test.mean=0.2394848,fnr.test.mean=0.2424069,timetrain.test.mean=0.0150000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.130795</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level1">
<h1 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h1>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level2">
<h2 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h2>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1 127     M        R    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2 202     M        M    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3 134     M        M    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 106     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5  48     R        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 145     M        R    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.00</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1 127     M        R    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2 202     M        M    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3 134     M        M    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 106     M        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5  48     R        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 145     M        R    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1 127     M        R    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2 202     M        M    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3 134     M        M    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 106     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5  48     R        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 145     M        R    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] M M M M R M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] R M M M M R</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0131984</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.03</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 54   54 versicolor versicolor</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 65   65 versicolor versicolor</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 120 120  virginica  virginica</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 137 137  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 61   61 versicolor versicolor</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 79   79 versicolor versicolor</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 122 122  virginica  virginica</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 39   39     setosa     setosa</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 57   57 versicolor versicolor</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 109 109  virginica  virginica</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 121 121  virginica  virginica</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 106 106  virginica  virginica</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level2">
<h2 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h2>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level2">
<h2 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h2>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg      cyl     disp       hp     drat       wt     qsec        vs</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 23.47273 4.727273 137.1091 103.8182 3.822727 2.712545 18.56545 0.7272727</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 13.91667 8.000000 379.0000 254.0000 3.476667 4.124167 15.95833 0.0000000</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 16.38000 8.000000 306.7200 167.0000 3.040000 3.581000 17.35800 0.0000000</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 0.6363636 4.181818 2.454545</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 0.3333333 3.666667 4.666667</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 0.0000000 3.000000 2.400000</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg      cyl     disp     hp     drat      wt    qsec   vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 15.26000 8.000000 402.0000 208.00 3.238000 4.37880 16.9440 0.00</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 17.57500 7.500000 271.3500 162.50 3.072500 3.69875 18.1100 0.25</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 24.96667 4.666667 115.1083  98.25 4.006667 2.36400 18.2325 0.75</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.0000000 3.000000 3.200000</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.0000000 3.000000 2.500000</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.8333333 4.083333 2.416667</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##        mpg cyl     disp       hp  drat       wt     qsec  vs        am</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 24.43000 4.6 124.8900  88.4000 4.071 2.583000 19.05900 0.8 0.5000000</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 14.18333 8.0 390.6667 239.8333 3.330 4.138167 16.29833 0.0 0.3333333</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 17.32000 7.2 276.1600 139.0000 2.964 3.540000 18.24600 0.4 0.0000000</a>
<a class="sourceLine" id="cb14-38" data-line-number="38">##       gear     carb</a>
<a class="sourceLine" id="cb14-39" data-line-number="39">## 1 4.000000 2.300000</a>
<a class="sourceLine" id="cb14-40" data-line-number="40">## 2 3.666667 4.333333</a>
<a class="sourceLine" id="cb14-41" data-line-number="41">## 3 3.000000 1.800000</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn    indus chas      nox       rm     age      dis</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 3368.322 1455.783 3153.952    0 2792.063 18082.73 2928.49 3647.584</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        rad      tax ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 627.7882 2615.857 3575.75 458.8384 11560.55</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##      crim       zn    indus chas     nox      rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 1555.28 1415.276 3993.273    0 3292.76 16030.7 2495.548 3046.818</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 856.6377 2786.734 2992.473 517.7998 10328.78</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn    indus     chas      nox       rm      age     dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 3168.009 5038.819 6147.373 343.3515 7759.908 7893.768 6973.976 3621.02</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##        rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1 577.1748 306.0295 29.48173 0 20434.46</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 283 268   7 395 385 218 467 229 409 206 356 155 495 126 370 176 253</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18]  78  96 175 397  58 327 345 391  69 492 188 192 167 267  15 394 273</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 319 413 197 151  47 401 183 306 423 173 480 355 133 219   6 442 247</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52] 291 256 149 271 200 411  19 145  35 129 217 333 177 487 428 152 107</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 124 211 322 349 318  98 292  18 138 342 100 326 464 344  53  65 438</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 213 230 367 158 110 504  11 193 114 328 476 470 286 429 263 335   9</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103]  44 261 132 390 170 398  42 302 178 376 506 465  27  52 220 475  67</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120] 304 189 321 441 418 153 461 142  40  10 312 258 201 299   8 346 444</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 320 406 503  63 281 259  22  20 436 101 228 121  17 166 468 207 204</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 227 325 241 244  80  85  26 500 179 426 276 278 161 491   1 240  73</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171]  64  49  86 305 134 205 366 498 340  87 412 252 163 377  97 353 190</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188] 115 285 458 223 374 284 202 144 501 437 334 168 307  82 309   3 424</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205]  57 472 427 196  99 245  74 462 463  93 298 341 473 225 313 109 417</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222]  55 301 336 118 164  50 330 388 316 289 364 343 410 269  14 481  72</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239] 210 373  83 264 105 474  46 300 234 440 499  84 235 171 270 375 422</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256] 139 317 287 212 403  62  90 128  68 157 323  60 254  38 108 332 453</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 478 460  61 360 277  37 408 199 479 383 457 160 407 449 368 226 392</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290]  33  95 337 505 112 350 450 295 260 182  91 329  31  39 454  89 243</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307] 484 387 369 494 169 486  24 265 315 181 296 165 380 237 186 231 290</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 372 246 174 250 194 489 116 384 224 466  79 338 146 485 404</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 283 268  41 467 445 409 356 339 155 203 242 176 414  78  96 257 140</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18]  21 397  58 303 327 345  69 187 188 430 136  28 394 483 273 197  29</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 456 151 425 502 272 135  47 306 209 423 480 435  56 371 219 256 279</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52]  45  13 216 208 123 271 200 411 145 129 217 119 177 280  32 447  23</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 152 107 347  94 191 211 239  36 349 405 274 275  59 358 125  18 221</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86] 342 448 326 311 154  12 438 232 230 396 367   5 504  11 193 400  75</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 114 236 328 493 362 429 263 335  81 251 261 282 170   4 198 308 293</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 506 137  27 147  52 459 220 475 233 381 104 321 418 416 351  40 258</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 201   8 346 320 379  22 131  20 101  17 166 468 378 446  54 204 227</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154]  51 325  77  80  85 500 179 359  16 426 439 161 497 421 491   1 240</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 365 305 248 134 205 496 498 431 399  87 382 252 163 471 103  97 353</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 190 363  92 374 122 120 437 334 386  82 309  34  57 472 427 196 245</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205]  74 462  93 451 298 113 389 225 313 172  55 301 324 148 118 266 164</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222]  50 288 477 469 330 388 316 402 364 410 455 143  43 210 373  25 482</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239] 264 111 105 300  70 215 433 262 130 488 354 375 102 317 294 238  62</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 141 184 128  68 185 106 323  60 393 254 332  76  71 331 460  61 277</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273]  37 408 199 434 443 432 160 407 490 415 156   2 420 348 255  33 195</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 452 112 350 295 314 260 182 249 357 159  66  91 329  89 243 180 127</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307] 310  48  88 361 352 265 315 296 165 237 186 231 290 246 419 174 150</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 222 162 214 194 489 116 384 297 466  79  30 338 117 485</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1]   7 395 385 218  41 229 445 206 339 495 126 203 370 242 414 253 257</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 140  21 175 303 391 187 492 430 192 167 267 136  28  15 483 319 413</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35]  29 456 425 502 272 135 401 183 209 173 435  56 355 133 371   6 442</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 247 291 279  45  13 216 208 123 149  19  35 333 119 280 487 428  32</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 447  23 347 124  94 191 322 239  36 405 274 318  98 275  59 292 358</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 125 138 221 100 448 311 154  12 464 344  53  65 232 213 396   5 158</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 110 400  75 236 493 476 362 470 286   9  44  81 251 132 282 390   4</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 398  42 198 302 308 178 376 293 465 137 147 459  67 233 304 381 104</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137] 189 441 416 351 153 461 142  10 312 299 444 406 503 379  63 281 259</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 131 436 228 121 378 446 207  54  51  77 241 244  26 359  16 439 276</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171] 278 497 421  73  64  49  86 365 248 366 496 431 399 340 382 412 471</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188] 103 377 115 285 363 458  92 223 122 120 284 202 144 501 168 307 386</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205]   3 424  34  99 463 451 341 113 389 473 172 109 417 324 336 148 266</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222] 288 477 469 402 289 343 455 269 143  14 481  43  72  25 482  83 111</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239] 474  46  70 215 234 433 440 262 499  84 130 235 488 171 270 354 422</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 139 102 294 238 287 212 403  90 141 184 157 185 106 393  38 108  76</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273]  71 453 478 331 360 434 443 432 479 383 457 490 415 449 368 156   2</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 420 348 255 226 392  95 337 195 452 505 450 314 249 357 159  66  31</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307]  39 454 484 180 127 310 387 369 494  48 169 486  88 361 352  24 181</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324] 380 372 419 250 150 222 162 214 224 297  30 146 117 404</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   2   4   5  12  13  16  21  23  25  28  29  30  32  34  36  41  43</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  45  48  51  54  56  59  66  70  71  75  76  77  81  88  92  94 102</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 103 104 106 111 113 117 119 120 122 123 125 127 130 131 135 136 137</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 140 141 143 147 148 150 154 156 159 162 172 180 184 185 187 191 195</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 198 203 208 209 214 215 216 221 222 232 233 236 238 239 242 248 249</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 251 255 257 262 266 272 274 275 279 280 282 288 293 294 297 303 308</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 310 311 314 324 331 339 347 348 351 352 354 357 358 359 361 362 363</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 365 371 378 379 381 382 386 389 393 396 399 400 402 405 414 415 416</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 419 420 421 425 430 431 432 433 434 435 439 443 445 446 447 448 451</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 452 455 456 459 469 471 477 482 483 488 490 493 496 497 502</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   3   6   7   9  10  14  15  19  24  26  31  35  38  39  42  44  46</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  49  53  63  64  65  67  72  73  83  84  86  90  95  98  99 100 108</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35] 109 110 115 121 124 126 132 133 138 139 142 144 146 149 153 157 158</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 167 168 169 171 173 175 178 181 183 189 192 202 206 207 212 213 218</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 223 224 226 228 229 234 235 241 244 247 250 253 259 267 269 270 276</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 278 281 284 285 286 287 289 291 292 299 302 304 307 312 318 319 322</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 333 336 337 340 341 343 344 355 360 366 368 369 370 372 376 377 380</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 383 385 387 390 391 392 395 398 401 403 404 406 412 413 417 422 424</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 428 436 440 441 442 444 449 450 453 454 457 458 461 463 464 465 470</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 473 474 476 478 479 481 484 486 487 492 494 495 499 501 503 505</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   1   8  11  17  18  20  22  27  33  37  40  47  50  52  55  57  58</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  60  61  62  68  69  74  78  79  80  82  85  87  89  91  93  96  97</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 101 105 107 112 114 116 118 128 129 134 145 151 152 155 160 161 163</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 164 165 166 170 174 176 177 179 182 186 188 190 193 194 196 197 199</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 200 201 204 205 210 211 217 219 220 225 227 230 231 237 240 243 245</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 246 252 254 256 258 260 261 263 264 265 268 271 273 277 283 290 295</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 296 298 300 301 305 306 309 313 315 316 317 320 321 323 325 326 327</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 328 329 330 332 334 335 338 342 345 346 349 350 353 356 364 367 373</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 374 375 384 388 394 397 407 408 409 410 411 418 423 426 427 429 437</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 438 460 462 466 467 468 472 475 480 485 489 491 498 500 504 506</a></code></pre></div>
</div>
</div>
<div id="stratification-and-blocking" class="section level1">
<h1 class="hasAnchor">
<a href="#stratification-and-blocking" class="anchor"></a>Stratification and blocking</h1>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h2>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0198693</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.234308</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h2>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=23.4061750</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0315378</a></code></pre></div>
</div>
<div id="blocking" class="section level2">
<h2 class="hasAnchor">
<a href="#blocking" class="anchor"></a>Blocking</h2>
<p>If some observations “belong together” and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> <code>factor</code> when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level1">
<h1 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h1>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb20-6" data-line-number="6"></a>
<a class="sourceLine" id="cb20-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## List of 4</a>
<a class="sourceLine" id="cb20-9" data-line-number="9">##  $ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">##  $ iters   : int 3</a>
<a class="sourceLine" id="cb20-11" data-line-number="11">##  $ predict : chr "test"</a>
<a class="sourceLine" id="cb20-12" data-line-number="12">##  $ stratify: logi FALSE</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb20-14" data-line-number="14"></a>
<a class="sourceLine" id="cb20-15" data-line-number="15"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## List of 6</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb20-19" data-line-number="19">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb20-20" data-line-number="20">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb20-21" data-line-number="21">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb20-22" data-line-number="22">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb20-23" data-line-number="23">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb21-8" data-line-number="8"></a>
<a class="sourceLine" id="cb21-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb21-11" data-line-number="11">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-12" data-line-number="12">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-13" data-line-number="13">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-14" data-line-number="14">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-15" data-line-number="15">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-16" data-line-number="16">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-17" data-line-number="17">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-18" data-line-number="18">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-19" data-line-number="19">##   ..$ : int [1:100] 98 150 99 110 111 112 143 41 65 51 ...</a>
<a class="sourceLine" id="cb21-20" data-line-number="20">##   ..$ : int [1:100] 147 98 150 50 114 14 112 143 65 23 ...</a>
<a class="sourceLine" id="cb21-21" data-line-number="21">##   ..$ : int [1:100] 147 50 99 114 110 111 14 41 23 37 ...</a>
<a class="sourceLine" id="cb21-22" data-line-number="22">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-23" data-line-number="23">##   ..$ : int [1:50] 4 7 9 10 11 14 17 22 23 29 ...</a>
<a class="sourceLine" id="cb21-24" data-line-number="24">##   ..$ : int [1:50] 2 3 6 8 12 13 16 20 21 25 ...</a>
<a class="sourceLine" id="cb21-25" data-line-number="25">##   ..$ : int [1:50] 1 5 15 18 19 24 26 30 33 34 ...</a>
<a class="sourceLine" id="cb21-26" data-line-number="26">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-27" data-line-number="27">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-28" data-line-number="28"></a>
<a class="sourceLine" id="cb21-29" data-line-number="29"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb21-30" data-line-number="30">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb21-31" data-line-number="31"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb21-32" data-line-number="32">## List of 5</a>
<a class="sourceLine" id="cb21-33" data-line-number="33">##  $ desc      :List of 4</a>
<a class="sourceLine" id="cb21-34" data-line-number="34">##   ..$ id      : chr "cross-validation"</a>
<a class="sourceLine" id="cb21-35" data-line-number="35">##   ..$ iters   : int 3</a>
<a class="sourceLine" id="cb21-36" data-line-number="36">##   ..$ predict : chr "test"</a>
<a class="sourceLine" id="cb21-37" data-line-number="37">##   ..$ stratify: logi FALSE</a>
<a class="sourceLine" id="cb21-38" data-line-number="38">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb21-39" data-line-number="39">##  $ size      : int 150</a>
<a class="sourceLine" id="cb21-40" data-line-number="40">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb21-41" data-line-number="41">##   ..$ : int [1:100] 146 48 117 52 51 144 49 33 109 29 ...</a>
<a class="sourceLine" id="cb21-42" data-line-number="42">##   ..$ : int [1:100] 48 97 116 141 77 136 137 144 13 109 ...</a>
<a class="sourceLine" id="cb21-43" data-line-number="43">##   ..$ : int [1:100] 146 97 116 141 77 117 136 52 51 137 ...</a>
<a class="sourceLine" id="cb21-44" data-line-number="44">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb21-45" data-line-number="45">##   ..$ : int [1:50] 5 7 10 13 14 17 20 21 22 26 ...</a>
<a class="sourceLine" id="cb21-46" data-line-number="46">##   ..$ : int [1:50] 1 2 16 18 23 25 27 29 30 31 ...</a>
<a class="sourceLine" id="cb21-47" data-line-number="47">##   ..$ : int [1:50] 3 4 6 8 9 11 12 15 19 24 ...</a>
<a class="sourceLine" id="cb21-48" data-line-number="48">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb21-49" data-line-number="49">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb21-50" data-line-number="50"></a>
<a class="sourceLine" id="cb21-51" data-line-number="51"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb21-52" data-line-number="52">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb21-53" data-line-number="53">##   [1] 146  97 116 141  77 117 136  52  51 137  49  33  13  29 118   2  44</a>
<a class="sourceLine" id="cb21-54" data-line-number="54">##  [18]  45  37 150 127  88 112  31 107  21  85 103  95  22  99  36  62  59</a>
<a class="sourceLine" id="cb21-55" data-line-number="55">##  [35]  71   7  73 148  54  58  60  91  35   1 121 105  75 140 143 119 101</a>
<a class="sourceLine" id="cb21-56" data-line-number="56">##  [52]  46  94 120 131 128  20 123 135  47   5 145  38  89  16  23 122  17</a>
<a class="sourceLine" id="cb21-57" data-line-number="57">##  [69]  83  81  80  98  27 126  14  74  69  41 147 102  50  56  96  84  55</a>
<a class="sourceLine" id="cb21-58" data-line-number="58">##  [86]  10  26 106  42  66  18  63  90 100  76  30  43  92  68  25</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3"></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb22-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-9" data-line-number="9">##           0.02</a>
<a class="sourceLine" id="cb22-10" data-line-number="10"></a>
<a class="sourceLine" id="cb22-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">##     0.06666667</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level1">
<h1 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h1>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb24-4" data-line-number="4"></a>
<a class="sourceLine" id="cb24-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">## &lt;bytecode: 0xcea5af8&gt;</a>
<a class="sourceLine" id="cb24-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb24-10" data-line-number="10"></a>
<a class="sourceLine" id="cb24-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb24-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb24-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb24-14" data-line-number="14"></a>
<a class="sourceLine" id="cb24-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb24-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb24-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb24-18" data-line-number="18">## &lt;bytecode: 0x142d5388&gt;</a>
<a class="sourceLine" id="cb24-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level2">
<h2 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h2>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb25-4" data-line-number="4"></a>
<a class="sourceLine" id="cb25-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb25-14" data-line-number="14"></a>
<a class="sourceLine" id="cb25-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">## [Resample] iter 1:    26.542105426.542105426.542105426.5421054</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">## [Resample] iter 2:    20.291144020.291144020.291144020.2911440</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">## [Resample] iter 3:    27.436121127.436121127.436121127.4361211</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb25-23" data-line-number="23">## Aggregated Result: mse.test.mean=24.7564568,mse.test.median=26.5421054,mse.test.min=20.2911440,mse.test.max=27.4361211</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb25-25" data-line-number="25"></a>
<a class="sourceLine" id="cb25-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">## Aggr perf: mse.test.mean=24.7564568,mse.test.median=26.5421054,mse.test.min=20.2911440,mse.test.max=27.4361211</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">## Runtime: 0.0279632</a>
<a class="sourceLine" id="cb25-32" data-line-number="32"></a>
<a class="sourceLine" id="cb25-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##        24.75646        26.54211        20.29114        27.43612</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level2">
<h2 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h2>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb26-6" data-line-number="6">## [Resample] iter 1:    0.0300000    0.0600000</a>
<a class="sourceLine" id="cb26-7" data-line-number="7">## [Resample] iter 2:    0.0300000    0.0800000</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## [Resample] iter 3:    0.0500000    0.1000000</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb26-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0800000,mmce.train.mean=0.0366667</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb26-12" data-line-number="12"></a>
<a class="sourceLine" id="cb26-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">## 1    1 0.03 0.03</a>
<a class="sourceLine" id="cb26-16" data-line-number="16">## 2    2 0.03 0.03</a>
<a class="sourceLine" id="cb26-17" data-line-number="17">## 3    3 0.05 0.05</a>
<a class="sourceLine" id="cb26-18" data-line-number="18"></a>
<a class="sourceLine" id="cb26-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##      0.08000000      0.03666667</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level2">
<h2 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h2>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3"></a>
<a class="sourceLine" id="cb27-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb27-7" data-line-number="7"></a>
<a class="sourceLine" id="cb27-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb27-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb27-17" data-line-number="17"></a>
<a class="sourceLine" id="cb27-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb27-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">## 1    1 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">## 2    2 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">## 3    3 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">## 4    4 0.02666667 0.02666667 0.02666667</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">## 5    5 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">## 6    6 0.04666667 0.04666667 0.04666667</a>
<a class="sourceLine" id="cb27-28" data-line-number="28"></a>
<a class="sourceLine" id="cb27-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb27-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb27-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb27-32" data-line-number="32">##     0.06394554     0.05096291     0.05162840</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h1>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb28-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb28-4" data-line-number="4">## [Resample] iter 1:    0.0400000 0.0333333</a>
<a class="sourceLine" id="cb28-5" data-line-number="5">## [Resample] iter 2:    0.0400000 0.0303030</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">## [Resample] iter 3:    0.0200000 0.0208333</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0333333,ber.test.mean=0.0281566</a>
<a class="sourceLine" id="cb28-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb28-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb28-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb28-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0333333,ber.test.mean=0.0281566</a>
<a class="sourceLine" id="cb28-14" data-line-number="14">## Runtime: 0.025079</a>
<a class="sourceLine" id="cb28-15" data-line-number="15"></a>
<a class="sourceLine" id="cb28-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb28-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb28-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb28-19" data-line-number="19">## [Resample] iter 1:    18.4790067  3.0926697   24.6011358  3.4414968</a>
<a class="sourceLine" id="cb28-20" data-line-number="20">## [Resample] iter 2:    18.3102561  3.2002984   28.6790670  3.8193861</a>
<a class="sourceLine" id="cb28-21" data-line-number="21">## [Resample] iter 3:    18.2961688  3.0512533   28.9856072  3.6661040</a>
<a class="sourceLine" id="cb28-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb28-23" data-line-number="23">## Aggregated Result: mse.b632plus=24.2495336,mae.b632plus=3.4596519</a>
<a class="sourceLine" id="cb28-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb28-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb28-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb28-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb28-28" data-line-number="28">## Aggr perf: mse.b632plus=24.2495336,mae.b632plus=3.4596519</a>
<a class="sourceLine" id="cb28-29" data-line-number="29">## Runtime: 0.0405271</a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li>
<a href="#accessing-resample-results">Accessing resample results</a><ul class="nav nav-pills nav-stacked">
<li><a href="#predictions">Predictions</a></li>
      <li><a href="#learner-models">Learner models</a></li>
      <li><a href="#the-extract-option">The extract option</a></li>
      </ul>
</li>
      <li>
<a href="#stratification-and-blocking">Stratification and blocking</a><ul class="nav nav-pills nav-stacked">
<li><a href="#stratification-with-respect-to-the-target-variables">Stratification with respect to the target variable(s)</a></li>
      <li><a href="#stratification-with-respect-to-explanatory-variables">Stratification with respect to explanatory variables</a></li>
      <li><a href="#blocking">Blocking</a></li>
      </ul>
</li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li>
<a href="#aggregating-performance-values">Aggregating performance values</a><ul class="nav nav-pills nav-stacked">
<li><a href="#example-one-measure-with-different-aggregations">Example: One measure with different aggregations</a></li>
      <li><a href="#example-calculating-the-training-error">Example: Calculating the training error</a></li>
      <li><a href="#example-bootstrap">Example: Bootstrap</a></li>
      </ul>
</li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
 apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
 indexName: 'mlr',
 inputSelector: 'input#search-input.form-control',
 debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
